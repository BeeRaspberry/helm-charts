{{- if not .Values.persistence.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name:  {{ .Release.Name }}-db-secret
  namespace: {{ .Release.Namespace }}
data:
  username: {{ .Values.database.username | b64enc }}
{{- if .Values.database.password }}
  password: {{ .Values.database.password | b64enc }}
{{- end }}
  port:  {{ .Values.database.port | quote | b64enc }}
{{- if .Values.database.host }}
  host: {{ .Values.database.host | b64enc }}
{{- end }}
  databaseName: {{ .Values.database.databaseName | b64enc }}
  type: {{ .Values.database.type | b64enc }}
{{- end }}